#include "../x_types.h"


typedef struct {
	c_ideal_t label;
	size_t index;
} t_node;

typedef struct {
	t_node a;
	t_node b;
	c_ideal_t label;
} t_edge;

typedef struct {
	t_edge *reference;
	size_t length;
	size_t index;
} t_ctx;

#define INIT_T_CTX(T,R,LEN) do { \
	T.index = 0; \
	T.length = LEN; \
	T.reference = R; \
} while (0)

///////////////////////// REFERENCE POSET 1: youmuu's ghostblade //////////////////

c_ideal_t reference_poset[][2] = {
	{ 3, 1 },
	{ 5, 4 },
	{ 6, 4 },
	{ 1, 2 },
	{ 4, 2 }
};

t_edge reference_tree[] = {
	{ { 0, 0 }, { 6, 1 }, 6 },
	{ { 6, 1 }, { 5, 2 }, 5 },
	{ { 5, 2 }, { 4, 3 }, 4 },
	{ { 4, 3 }, { 3, 4 }, 3 },
	{ { 3, 4 }, { 2, 5 }, 2 },
	{ { 2, 5 }, { 1, 6 }, 1 },
	{ { 4, 3 }, { 2, 7 }, 2 },
	{ { 2, 7 }, { 1, 8 }, 1 },
	{ { 5, 2 }, { 3, 11 }, 3 },
	{ { 3, 11 }, { 2, 12 }, 2 },
	{ { 2, 12 }, { 1, 13 }, 1 },
	{ { 5, 2 }, { 2, 9 }, 2 },
	{ { 2, 9 }, { 1, 10 }, 1 },
	{ { 6, 1 }, { 2, 14 }, 2 },
	{ { 2, 14 }, { 1, 15 }, 1 }
};

t_edge reference_lattice[] = {
	{ { 0, 0 }, { 6, 1 }, 6 },
	{ { 6, 1 }, { 5, 2 }, 5 },
	{ { 5, 2 }, { 4, 3 }, 4 },
	{ { 4, 3 }, { 3, 4 }, 3 },
	{ { 3, 4 }, { 2, 5 }, 2 },
	{ { 2, 5 }, { 1, 6 }, 1 },
	{ { 4, 3 }, { 2, 7 }, 2 },
	{ { 2, 7 }, { 2, 5 }, 3 },
	{ { 2, 7 }, { 1, 8 }, 1 },
	{ { 1, 8 }, { 1, 6 }, 3 },
	{ { 5, 2 }, { 3, 11 }, 3 },
	{ { 3, 11 }, { 3, 4 }, 4 },
	{ { 3, 11 }, { 2, 12 }, 2 },
	{ { 2, 12 }, { 2, 5 }, 4 },
	{ { 2, 12 }, { 1, 13 }, 1 },
	{ { 1, 13 }, { 1, 6 }, 4 },
	{ { 5, 2 }, { 2, 9 }, 2 },
	{ { 2, 9 }, { 2, 12 }, 3 },
	{ { 2, 9 }, { 2, 7 }, 4 },
	{ { 2, 9 }, { 1, 10 }, 1 },
	{ { 1, 10 }, { 1, 8 }, 4 },
	{ { 1, 10 }, { 1, 13 }, 3 },
	{ { 6, 1 }, { 2, 14 }, 2 },
	{ { 2, 14 }, { 2, 9 }, 5 },
	{ { 2, 14 }, { 1, 15 }, 1 },
	{ { 1, 15 }, { 1, 10 }, 5 },
};

#define REFERENCE_POSET_N 6

c_ideal_t reference_le[][REFERENCE_POSET_N] = {
	{ 3, 1, 5, 6, 4, 2 },
	{ 3, 1, 6, 5, 4, 2 },
	{ 3, 5, 1, 6, 4, 2 },
	{ 3, 5, 6, 1, 4, 2 },
	{ 3, 5, 6, 4, 1, 2 },
	{ 3, 6, 1, 5, 4, 2 },
	{ 3, 6, 5, 1, 4, 2 },
	{ 3, 6, 5, 4, 1, 2 },
	{ 5, 3, 1, 6, 4, 2 },
	{ 5, 3, 6, 1, 4, 2 },
	{ 5, 3, 6, 4, 1, 2 },
	{ 5, 6, 3, 1, 4, 2 },
	{ 5, 6, 3, 4, 1, 2 },
	{ 5, 6, 4, 3, 1, 2 },
	{ 6, 3, 1, 5, 4, 2 },
	{ 6, 3, 5, 1, 4, 2 },
	{ 6, 3, 5, 4, 1, 2 },
	{ 6, 5, 3, 1, 4, 2 },
	{ 6, 5, 3, 4, 1, 2 },
	{ 6, 5, 4, 3, 1, 2 }
};

/////////////////////// POSET 2 //////////////////////////////////
// From diagrams in "Efficient computation of rank probabilities in posets" by Karel De Loof 

c_ideal_t reference_poset2[][2] = {
	{ 2, 4 },
	{ 1, 3 },
	{ 1, 4 },
	{ 3, 5 }
};

t_edge reference_tree2[] = {
	{ { 0, 0 }, { 5, 1 }, 5 },
	{ { 5, 1 }, { 4, 2 }, 4 },
	{ { 4, 2 }, { 3, 3 }, 3 },
	{ { 3, 3 }, { 2, 4 }, 2 },
	{ { 2, 4 }, { 1, 5 }, 1 },
	{ { 3, 3 }, { 1, 6 }, 1 },
	{ { 4, 2 }, { 2, 7 }, 2 },
	{ { 5, 1 }, { 3, 8 }, 3 },
	{ { 0, 0 }, { 4, 9 }, 4 },
	{ { 4, 9 }, { 2, 10 }, 2 },
};

t_edge reference_lattice2[] = {
	{ { 0, 0 }, { 5, 1 }, 5 },
	{ { 5, 1 }, { 4, 2 }, 4 },
	{ { 4, 2 }, { 3, 3 }, 3 },
	{ { 3, 3 }, { 2, 4 }, 2 },
	{ { 2, 4 }, { 1, 5 }, 1 },
	{ { 3, 3 }, { 1, 6 }, 1 },
	{ { 1, 6 }, { 1, 5 }, 2 },
	{ { 4, 2 }, { 2, 7 }, 2 },
	{ { 2, 7 }, { 2, 4 }, 3 },
	{ { 5, 1 }, { 3, 8 }, 3 },
	{ { 3, 8 }, { 3, 3 }, 4 },
	{ { 0, 0 }, { 4, 9 }, 4 },
	{ { 4, 9 }, { 4, 2 }, 5 },
	{ { 4, 9 }, { 2, 10 }, 2 },
	{ { 2, 10 }, { 2, 7 }, 5 },
};

#define REFERENCE_POSET2_N 5

c_ideal_t reference_le2[][REFERENCE_POSET2_N] = {
	{ 2, 1, 4, 3, 5 },
	{ 2, 1, 3, 4, 5 },
	{ 2, 1, 3, 5, 4 },
	{ 1, 2, 4, 3, 5 },
	{ 1, 2, 3, 4, 5 },
	{ 1, 2, 3, 5, 4 },
	{ 1, 3, 2, 4, 5 },
	{ 1, 3, 2, 5, 4 },
	{ 1, 3, 5, 2, 4 }
};

